# Laglig.se Fullstack Architecture Document

## Table of Contents

- [Laglig.se Fullstack Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
  - [1.1 Starter Template or Existing Project](./11-starter-template-or-existing-project.md)
  - [1.2 Next.js 16 Migration Notes](./12-nextjs-16-migration-notes.md)
  - [1.3 API Strategy Decision](./13-api-strategy-decision.md)
  - [1.4 Change Log](./14-change-log.md)
  - [2. High Level Architecture](./2-high-level-architecture.md)
    - [2.1 Technical Summary](./2-high-level-architecture.md#21-technical-summary)
    - [2.2 Platform and Infrastructure Choice](./2-high-level-architecture.md#22-platform-and-infrastructure-choice)
    - [2.3 Repository Structure](./2-high-level-architecture.md#23-repository-structure)
    - [2.4 High Level Architecture Diagram](./2-high-level-architecture.md#24-high-level-architecture-diagram)
    - [2.5 Architectural Patterns](./2-high-level-architecture.md#25-architectural-patterns)
    - [2.6 AI/RAG Technology Stack Detail](./2-high-level-architecture.md#26-airag-technology-stack-detail)
    - [2.7 Redis Cache Strategy](./2-high-level-architecture.md#27-redis-cache-strategy)
    - [2.8 State Management Strategy](./2-high-level-architecture.md#28-state-management-strategy)
    - [2.9 Cost Breakdown & Scaling Economics](./2-high-level-architecture.md#29-cost-breakdown-scaling-economics)
    - [2.10 Resilience & Error Handling Strategy](./2-high-level-architecture.md#210-resilience-error-handling-strategy)
    - [2.11 Observability & Monitoring](./2-high-level-architecture.md#211-observability-monitoring)
  - [3. Tech Stack](./3-tech-stack.md)
    - [3.1 Technology Stack Table](./3-tech-stack.md#31-technology-stack-table)
    - [3.2 Notable Technology Decisions](./3-tech-stack.md#32-notable-technology-decisions)
    - [3.3 Version Update Policy](./3-tech-stack.md#33-version-update-policy)
    - [3.4 Development Environment Requirements](./3-tech-stack.md#34-development-environment-requirements)
    - [3.5 Tech Stack Alternatives Considered & Rejected](./3-tech-stack.md#35-tech-stack-alternatives-considered-rejected)
    - [3.6 License Compliance Policy](./3-tech-stack.md#36-license-compliance-policy)
  - [4. Data Models](./4-data-models.md)
    - [4.1 User](./4-data-models.md#41-user)
    - [4.2 Workspace](./4-data-models.md#42-workspace)
    - [4.3 WorkspaceMember](./4-data-models.md#43-workspacemember)
    - [4.4 OnboardingSession](./4-data-models.md#44-onboardingsession)
    - [4.5 LegalDocument](./4-data-models.md#45-legaldocument)
    - [4.6 CourtCase](./4-data-models.md#46-courtcase)
    - [4.7 EUDocument](./4-data-models.md#47-eudocument)
    - [4.8 CrossReference](./4-data-models.md#48-crossreference)
    - [4.9 Amendment (Enhanced for Competitive Parity)](./4-data-models.md#49-amendment-enhanced-for-competitive-parity)
    - [4.10 DocumentSubject](./4-data-models.md#410-documentsubject)
    - [4.11 LawEmbedding](./4-data-models.md#411-lawembedding)
    - [4.12 LawList](./4-data-models.md#412-lawlist)
    - [4.13 LawListItem (Join Table)](./4-data-models.md#413-lawlistitem-join-table)
    - [4.14 LawInWorkspace ⭐ CRITICAL - This is the Kanban card!](./4-data-models.md#414-lawinworkspace-critical-this-is-the-kanban-card)
    - [4.15 LawTask](./4-data-models.md#415-lawtask)
    - [4.16 AIChatMessage](./4-data-models.md#416-aichatmessage)
    - [4.17 Subscription](./4-data-models.md#417-subscription)
    - [4.18 WorkspaceUsage](./4-data-models.md#418-workspaceusage)
    - [4.19 WorkspaceInvitation](./4-data-models.md#419-workspaceinvitation)
    - [4.20 WorkspaceAuditLog](./4-data-models.md#420-workspaceauditlog)
    - [4.21 Employee](./4-data-models.md#421-employee)
    - [4.22 Department](./4-data-models.md#422-department)
    - [4.23 EmployeeDocument](./4-data-models.md#423-employeedocument)
    - [4.24 Kollektivavtal](./4-data-models.md#424-kollektivavtal)
    - [4.25 EmployeeKollektivavtal (Join Table)](./4-data-models.md#425-employeekollektivavtal-join-table)
    - [4.26 KollektivavtalEmbedding](./4-data-models.md#426-kollektivavtalembedding)
    - [4.27 ChangeNotification](./4-data-models.md#427-changenotification)
    - [4.28 LawChangeHistory](./4-data-models.md#428-lawchangehistory)
    - [4.29 BackgroundJob](./4-data-models.md#429-backgroundjob)
  - [Data Model Summary & Rationale](./data-model-summary-rationale.md)
    - [Entity Count: 29 Total](./data-model-summary-rationale.md#entity-count-29-total)
    - [Key Architectural Decisions](./data-model-summary-rationale.md#key-architectural-decisions)
    - [Storage Estimates](./data-model-summary-rationale.md#storage-estimates)
    - [Performance Indexes](./data-model-summary-rationale.md#performance-indexes)
  - [5. API Specification](./5-api-specification.md)
    - [5.1 API Architecture Overview](./5-api-specification.md#51-api-architecture-overview)
    - [5.2 Server Actions Specification](./5-api-specification.md#52-server-actions-specification)
    - [5.3 REST API Specification (OpenAPI 3.0)](./5-api-specification.md#53-rest-api-specification-openapi-30)
      - [Admin Ingestion Endpoints](./5-api-specification.md#admin-ingestion-endpoints)
      - [Cron Endpoints (Vercel Cron)](./5-api-specification.md#cron-endpoints-vercel-cron)
      - [Webhook Endpoints](./5-api-specification.md#webhook-endpoints)
      - [Public API Endpoints (Enterprise Tier)](./5-api-specification.md#public-api-endpoints-enterprise-tier)
      - [Health & Monitoring](./5-api-specification.md#health-monitoring)
    - [5.4 Authentication & Authorization](./5-api-specification.md#54-authentication-authorization)
      - [NextAuth.js Configuration (Server Actions)](./5-api-specification.md#nextauthjs-configuration-server-actions)
      - [API Key Authentication (REST Endpoints)](./5-api-specification.md#api-key-authentication-rest-endpoints)
      - [Role-Based Access Control (RBAC)](./5-api-specification.md#role-based-access-control-rbac)
    - [5.5 Rate Limiting & Quotas](./5-api-specification.md#55-rate-limiting-quotas)
    - [5.6 Versioning Strategy](./5-api-specification.md#56-versioning-strategy)
    - [5.7 API Documentation & Developer Portal](./5-api-specification.md#57-api-documentation-developer-portal)
  - [Section 5 Summary ✅](./section-5-summary.md)
    - [5.8 External API Integration Clients](./section-5-summary.md#58-external-api-integration-clients)
      - [5.8.1 Riksdagen API Client](./section-5-summary.md#581-riksdagen-api-client)
      - [5.8.2 Domstolsverket PUH API Client](./section-5-summary.md#582-domstolsverket-puh-api-client)
      - [5.8.3 Rate Limiting & Retry Strategy](./section-5-summary.md#583-rate-limiting-retry-strategy)
      - [5.8.4 Additional External API Clients (Summary)](./section-5-summary.md#584-additional-external-api-clients-summary)
  - [6. Components](./6-components.md)
    - [6.1 Component Architecture Overview](./6-components.md#61-component-architecture-overview)
    - [6.2 High-Level Component Diagram](./6-components.md#62-high-level-component-diagram)
    - [6.3 Frontend Components](./6-components.md#63-frontend-components)
      - [6.3.1 Authentication Components](./6-components.md#631-authentication-components)
      - [6.3.2 Onboarding Wizard Component](./6-components.md#632-onboarding-wizard-component)
      - [6.3.3 Dashboard & Workspace Component](./6-components.md#633-dashboard-workspace-component)
      - [6.3.4 Kanban Board Component](./6-components.md#634-kanban-board-component)
      - [6.3.5 AI Chat Interface Component](./6-components.md#635-ai-chat-interface-component)
      - [6.3.6 SEO Law Pages Component](./6-components.md#636-seo-law-pages-component)
      - [6.3.7 HR Module Component](./6-components.md#637-hr-module-component)
      - [6.3.8 Change Monitoring Component](./6-components.md#638-change-monitoring-component)
      - [6.3.9 Additional UI Components](./6-components.md#639-additional-ui-components)
    - [6.4 Backend Services](./6-components.md#64-backend-services)
      - [6.4.1 Authentication Service](./6-components.md#641-authentication-service)
      - [6.4.2 Onboarding Service](./6-components.md#642-onboarding-service)
      - [6.4.3 RAG Service](./6-components.md#643-rag-service)
      - [6.4.4 Ingestion Service](./6-components.md#644-ingestion-service)
      - [6.4.5 Change Detection Service](./6-components.md#645-change-detection-service)
      - [6.4.6 Notification Service](./6-components.md#646-notification-service)
      - [6.4.7 HR Service](./6-components.md#647-hr-service)
      - [6.4.8 Subscription Service](./6-components.md#648-subscription-service)
    - [6.5 Shared Infrastructure Components](./6-components.md#65-shared-infrastructure-components)
      - [6.5.1 Database Layer (Prisma ORM)](./6-components.md#651-database-layer-prisma-orm)
      - [6.5.2 Cache Layer (Redis)](./6-components.md#652-cache-layer-redis)
      - [6.5.3 External API Clients](./6-components.md#653-external-api-clients)
      - [6.5.4 File Storage (Supabase Storage)](./6-components.md#654-file-storage-supabase-storage)
    - [6.6 Component Interaction Patterns](./6-components.md#66-component-interaction-patterns)
      - [6.6.1 Server Actions Pattern](./6-components.md#661-server-actions-pattern)
      - [6.6.2 Background Job Pattern](./6-components.md#662-background-job-pattern)
  - [Section 6 Complete ✅](./section-6-complete.md)
  - [7. External APIs](./7-external-apis.md)
    - [7.1 External API Strategy Overview](./7-external-apis.md#71-external-api-strategy-overview)
    - [7.2 Riksdagen API Integration](./7-external-apis.md#72-riksdagen-api-integration)
      - [Data Volume & Ingestion Strategy](./7-external-apis.md#data-volume-ingestion-strategy)
      - [Rate Limiting Implementation](./7-external-apis.md#rate-limiting-implementation)
      - [Error Handling & Retry Strategy](./7-external-apis.md#error-handling-retry-strategy)
      - [Data Processing Pipeline](./7-external-apis.md#data-processing-pipeline)
      - [Monitoring & Alerting](./7-external-apis.md#monitoring-alerting)
    - [7.3 Domstolsverket PUH API Integration](./7-external-apis.md#73-domstolsverket-puh-api-integration)
      - [Court Priority Strategy (Competitive Advantage)](./7-external-apis.md#court-priority-strategy-competitive-advantage)
      - [Search Strategy & Pagination](./7-external-apis.md#search-strategy-pagination)
    - [7.4 Bolagsverket API Integration](./7-external-apis.md#74-bolagsverket-api-integration)
    - [7.5 Fortnox API Integration (Post-MVP)](./7-external-apis.md#75-fortnox-api-integration-post-mvp)
    - [7.6 Stripe API Integration](./7-external-apis.md#76-stripe-api-integration)
    - [7.7 EUR-Lex CELLAR API Integration](./7-external-apis.md#77-eur-lex-cellar-api-integration)
    - [7.8 API Cost Management](./7-external-apis.md#78-api-cost-management)
    - [7.9 API Health Monitoring](./7-external-apis.md#79-api-health-monitoring)
    - [7.10 Data Synchronization Strategy](./7-external-apis.md#710-data-synchronization-strategy)
  - [Section 7 Complete ✅](./section-7-complete.md)
  - [8. Core Workflows (Complete MVP Version)](./8-core-workflows-complete-mvp-version.md)
    - [8.1 Workflow Overview](./8-core-workflows-complete-mvp-version.md#81-workflow-overview)
  - [P0 WORKFLOWS (Blocking - Required for Basic Functionality)](./p0-workflows-blocking-required-for-basic-functionality.md)
    - [8.2 Authentication & Account Creation (Epic 1, Story 1.3)](./p0-workflows-blocking-required-for-basic-functionality.md#82-authentication-account-creation-epic-1-story-13)
    - [8.3 Workspace Creation Post-Signup (Epic 5, Story 5.1)](./p0-workflows-blocking-required-for-basic-functionality.md#83-workspace-creation-post-signup-epic-5-story-51)
    - [8.4 Role-Based Access Control (Epic 5, Story 5.2)](./p0-workflows-blocking-required-for-basic-functionality.md#84-role-based-access-control-epic-5-story-52)
  - [P1 WORKFLOWS (Critical for MVP Launch)](./p1-workflows-critical-for-mvp-launch.md)
    - [8.5 Onboarding with Website Scraping (Epic 4, Stories 4.1-4.4)](./p1-workflows-critical-for-mvp-launch.md#85-onboarding-with-website-scraping-epic-4-stories-41-44)
    - [8.6 Search Workflow (Epic 2, Story 2.7)](./p1-workflows-critical-for-mvp-launch.md#86-search-workflow-epic-2-story-27)
    - [8.7 Law List Management (Epic 4, Story 4.9)](./p1-workflows-critical-for-mvp-launch.md#87-law-list-management-epic-4-story-49)
    - [8.8 Dashboard View Generation (Epic 6, Story 6.1)](./p1-workflows-critical-for-mvp-launch.md#88-dashboard-view-generation-epic-6-story-61)
    - [8.9 AI Chat with Multi-Type Context (Epic 3, Stories 3.4-3.7)](./p1-workflows-critical-for-mvp-launch.md#89-ai-chat-with-multi-type-context-epic-3-stories-34-37)
    - [8.10 Kanban Board with Task Management (Epic 6, Stories 6.2-6.5)](./p1-workflows-critical-for-mvp-launch.md#810-kanban-board-with-task-management-epic-6-stories-62-65)
    - [8.11 Employee CRUD & Compliance (Epic 7, Stories 7.1, 7.4)](./p1-workflows-critical-for-mvp-launch.md#811-employee-crud-compliance-epic-7-stories-71-74)
    - [8.12 Change Detection & Review (Epic 8, Stories 8.1-8.3)](./p1-workflows-critical-for-mvp-launch.md#812-change-detection-review-epic-8-stories-81-83)
  - [P2 WORKFLOWS (Important but can be simplified for MVP)](./p2-workflows-important-but-can-be-simplified-for-mvp.md)
    - [8.13 Trial Expiration & Conversion (Epic 4, Story 4.8)](./p2-workflows-important-but-can-be-simplified-for-mvp.md#813-trial-expiration-conversion-epic-4-story-48)
    - [8.14 Kollektivavtal Upload & Assignment (Epic 7, Story 7.5)](./p2-workflows-important-but-can-be-simplified-for-mvp.md#814-kollektivavtal-upload-assignment-epic-7-story-75)
    - [8.15 Global Search (Cmd+K) (Epic 6, Story 6.9)](./p2-workflows-important-but-can-be-simplified-for-mvp.md#815-global-search-cmdk-epic-6-story-69)
    - [8.16 Usage Limit Enforcement (Epic 5, Story 5.5)](./p2-workflows-important-but-can-be-simplified-for-mvp.md#816-usage-limit-enforcement-epic-5-story-55)
    - [8.17 SNI Discovery Flow (Epic 2, Story 2.9)](./p2-workflows-important-but-can-be-simplified-for-mvp.md#817-sni-discovery-flow-epic-2-story-29)
    - [8.18 Weekly Digest Generation (Epic 8, Story 8.7)](./p2-workflows-important-but-can-be-simplified-for-mvp.md#818-weekly-digest-generation-epic-8-story-87)
  - [P3 WORKFLOWS (Document now, implement Post-MVP)](./p3-workflows-document-now-implement-post-mvp.md)
    - [8.19 Fortnox Employee Sync (Epic 7, Story 7.12)](./p3-workflows-document-now-implement-post-mvp.md#819-fortnox-employee-sync-epic-7-story-712)
    - [8.20 Workspace Deletion & Recovery (Epic 5, Story 5.8)](./p3-workflows-document-now-implement-post-mvp.md#820-workspace-deletion-recovery-epic-5-story-58)
  - [Critical Workflow Coverage Matrix](./critical-workflow-coverage-matrix.md)
  - [Section 8 Complete (Full MVP Coverage) ✅](./section-8-complete-full-mvp-coverage.md)
    - [8.21 Cross-Document Navigation (Epic 2, Story 2.8)](./section-8-complete-full-mvp-coverage.md#821-cross-document-navigation-epic-2-story-28)
    - [8.22 AI Component Streaming (Epic 3, Story 3.8)](./section-8-complete-full-mvp-coverage.md#822-ai-component-streaming-epic-3-story-38)
    - [8.23 Chat History & Session Management (Epic 3, Story 3.10)](./section-8-complete-full-mvp-coverage.md#823-chat-history-session-management-epic-3-story-310)
    - [8.24 Welcome Email Sequence (Epic 4, Story 4.7)](./section-8-complete-full-mvp-coverage.md#824-welcome-email-sequence-epic-4-story-47)
    - [8.25 Onboarding Progress Tracking (Epic 4, Story 4.10)](./section-8-complete-full-mvp-coverage.md#825-onboarding-progress-tracking-epic-4-story-410)
    - [8.26 Add-On Purchase (Epic 5, Story 5.6)](./section-8-complete-full-mvp-coverage.md#826-add-on-purchase-epic-5-story-56)
    - [8.27 Workspace Switcher (Epic 5, Story 5.9)](./section-8-complete-full-mvp-coverage.md#827-workspace-switcher-epic-5-story-59)
    - [8.28 Unit Economics Tracking (Epic 5, Story 5.10)](./section-8-complete-full-mvp-coverage.md#828-unit-economics-tracking-epic-5-story-510)
    - [8.29 Activity Log (Epic 5, Story 5.11)](./section-8-complete-full-mvp-coverage.md#829-activity-log-epic-5-story-511)
    - [8.30 Onboarding Checklist (Epic 5, Story 5.12)](./section-8-complete-full-mvp-coverage.md#830-onboarding-checklist-epic-5-story-512)
    - [8.31 Kanban Column Customization (Epic 6, Story 6.7)](./section-8-complete-full-mvp-coverage.md#831-kanban-column-customization-epic-6-story-67)
    - [8.32 Export Kanban Board (Epic 6, Story 6.10)](./section-8-complete-full-mvp-coverage.md#832-export-kanban-board-epic-6-story-610)
    - [8.33 Employee Photo Upload (Epic 7, Story 7.7)](./section-8-complete-full-mvp-coverage.md#833-employee-photo-upload-epic-7-story-77)
    - [8.34 Employee Offboarding (Epic 7, Story 7.10)](./section-8-complete-full-mvp-coverage.md#834-employee-offboarding-epic-7-story-710)
    - [8.35 Employee Notes & @Mentions (Epic 7, Story 7.11)](./section-8-complete-full-mvp-coverage.md#835-employee-notes-mentions-epic-7-story-711)
    - [8.36 Reminder Emails for Unacknowledged Changes (Epic 8, Story 8.6)](./section-8-complete-full-mvp-coverage.md#836-reminder-emails-for-unacknowledged-changes-epic-8-story-86)
    - [8.37 Amendment Timeline Visualization (Epic 8, Story 8.9)](./section-8-complete-full-mvp-coverage.md#837-amendment-timeline-visualization-epic-8-story-89)
    - [8.38 Notification Preferences Management (Epic 8, Story 8.11)](./section-8-complete-full-mvp-coverage.md#838-notification-preferences-management-epic-8-story-811)
    - [8.39 Workflow Coverage Summary](./section-8-complete-full-mvp-coverage.md#839-workflow-coverage-summary)
      - [✅ All 89 PRD Stories Now Covered](./section-8-complete-full-mvp-coverage.md#all-89-prd-stories-now-covered)
      - [Section 8 Complete with Full PRD Alignment ✅](./section-8-complete-full-mvp-coverage.md#section-8-complete-with-full-prd-alignment)
  - [9. Database Schema](./9-database-schema.md)
    - [9.1 Database Overview](./9-database-schema.md#91-database-overview)
    - [9.2 Data Model Categories](./9-database-schema.md#92-data-model-categories)
    - [9.3 User & Authentication Entities](./9-database-schema.md#93-user-authentication-entities)
      - [9.3.1 User Model](./9-database-schema.md#931-user-model)
      - [9.3.2 Lead Capture Model](./9-database-schema.md#932-lead-capture-model)
    - [9.4 Workspace & Team Management](./9-database-schema.md#94-workspace-team-management)
      - [9.4.1 Workspace Model](./9-database-schema.md#941-workspace-model)
      - [9.4.2 Team Membership](./9-database-schema.md#942-team-membership)
    - [9.5 Legal Content Management](./9-database-schema.md#95-legal-content-management)
      - [9.5.1 Legal Document Model](./9-database-schema.md#951-legal-document-model)
      - [9.5.2 Cross-References](./9-database-schema.md#952-cross-references)
      - [9.5.3 Amendment Tracking](./9-database-schema.md#953-amendment-tracking)
    - [9.6 Law Management in Workspaces](./9-database-schema.md#96-law-management-in-workspaces)
      - [9.6.1 Law Lists](./9-database-schema.md#961-law-lists)
      - [9.6.2 Kanban Board](./9-database-schema.md#962-kanban-board)
      - [9.6.3 Task Management](./9-database-schema.md#963-task-management)
      - [9.6.4 Kanban Customization](./9-database-schema.md#964-kanban-customization)
    - [9.7 AI & RAG System](./9-database-schema.md#97-ai-rag-system)
      - [9.7.1 Chat Sessions](./9-database-schema.md#971-chat-sessions)
      - [9.7.2 Chat Messages](./9-database-schema.md#972-chat-messages)
      - [9.7.3 Drag-and-Drop Context](./9-database-schema.md#973-drag-and-drop-context)
      - [9.7.4 Vector Embeddings](./9-database-schema.md#974-vector-embeddings)
    - [9.8 HR Module](./9-database-schema.md#98-hr-module)
      - [9.8.1 Employee Management](./9-database-schema.md#981-employee-management)
      - [9.8.2 Departments](./9-database-schema.md#982-departments)
      - [9.8.3 Employee Documents](./9-database-schema.md#983-employee-documents)
      - [9.8.4 Employee Notes](./9-database-schema.md#984-employee-notes)
      - [9.8.5 Collective Agreements](./9-database-schema.md#985-collective-agreements)
    - [9.9 Change Tracking & Notifications](./9-database-schema.md#99-change-tracking-notifications)
      - [9.9.1 Law Version History](./9-database-schema.md#991-law-version-history)
      - [9.9.2 Change Notifications](./9-database-schema.md#992-change-notifications)
      - [9.9.3 Notification Preferences](./9-database-schema.md#993-notification-preferences)
    - [9.10 Analytics & Monitoring](./9-database-schema.md#910-analytics-monitoring)
      - [9.10.1 Onboarding Analytics](./9-database-schema.md#9101-onboarding-analytics)
      - [9.10.2 Audit Logging](./9-database-schema.md#9102-audit-logging)
      - [9.10.3 Usage Tracking](./9-database-schema.md#9103-usage-tracking)
      - [9.10.4 Unit Economics](./9-database-schema.md#9104-unit-economics)
    - [9.11 Subscription & Billing](./9-database-schema.md#911-subscription-billing)
    - [9.12 Background Jobs](./9-database-schema.md#912-background-jobs)
    - [9.13 Redis Session Storage](./9-database-schema.md#913-redis-session-storage)
    - [9.14 Database Indexes for Performance](./9-database-schema.md#914-database-indexes-for-performance)
    - [9.15 Data Compliance & Security](./9-database-schema.md#915-data-compliance-security)
      - [Encryption at Rest](./9-database-schema.md#encryption-at-rest)
      - [GDPR Compliance](./9-database-schema.md#gdpr-compliance)
      - [Row Level Security (RLS)](./9-database-schema.md#row-level-security-rls)
  - [Section 9 Summary](./section-9-summary.md)
    - [10.1 Overview](./section-9-summary.md#101-overview)
    - [10.2 Component Architecture](./section-9-summary.md#102-component-architecture)
      - [10.2.1 Component Hierarchy](./section-9-summary.md#1021-component-hierarchy)
      - [10.2.2 Component Categories](./section-9-summary.md#1022-component-categories)
      - [10.2.3 Component Organization](./section-9-summary.md#1023-component-organization)
    - [10.3 State Management Strategy](./section-9-summary.md#103-state-management-strategy)
      - [10.3.1 State Categories](./section-9-summary.md#1031-state-categories)
      - [10.3.2 Implementation Patterns](./section-9-summary.md#1032-implementation-patterns)
    - [10.4 Routing Architecture](./section-9-summary.md#104-routing-architecture)
      - [10.4.1 Route Structure](./section-9-summary.md#1041-route-structure)
      - [10.4.2 Routing Patterns](./section-9-summary.md#1042-routing-patterns)
    - [10.5 Data Fetching Strategy](./section-9-summary.md#105-data-fetching-strategy)
      - [10.5.1 Fetching Patterns](./section-9-summary.md#1051-fetching-patterns)
      - [10.5.2 Caching Strategy](./section-9-summary.md#1052-caching-strategy)
    - [10.6 Performance Optimization](./section-9-summary.md#106-performance-optimization)
      - [10.6.1 Bundle Optimization](./section-9-summary.md#1061-bundle-optimization)
      - [10.6.2 Image Optimization](./section-9-summary.md#1062-image-optimization)
      - [10.6.3 Font Optimization](./section-9-summary.md#1063-font-optimization)
      - [10.6.4 Prefetching Strategy](./section-9-summary.md#1064-prefetching-strategy)
    - [10.7 Error Handling](./section-9-summary.md#107-error-handling)
      - [10.7.1 Error Boundaries](./section-9-summary.md#1071-error-boundaries)
      - [10.7.2 Not Found Pages](./section-9-summary.md#1072-not-found-pages)
      - [10.7.3 Loading States](./section-9-summary.md#1073-loading-states)
    - [10.8 Accessibility Implementation](./section-9-summary.md#108-accessibility-implementation)
      - [10.8.1 Semantic HTML](./section-9-summary.md#1081-semantic-html)
      - [10.8.2 ARIA Labels](./section-9-summary.md#1082-aria-labels)
      - [10.8.3 Keyboard Navigation](./section-9-summary.md#1083-keyboard-navigation)
    - [10.9 Internationalization (i18n)](./section-9-summary.md#109-internationalization-i18n)
    - [10.10 Testing Strategy](./section-9-summary.md#1010-testing-strategy)
      - [10.10.1 Component Testing](./section-9-summary.md#10101-component-testing)
      - [10.10.2 Integration Testing](./section-9-summary.md#10102-integration-testing)
    - [10.11 Frontend Security](./section-9-summary.md#1011-frontend-security)
      - [10.11.1 XSS Prevention](./section-9-summary.md#10111-xss-prevention)
      - [10.11.2 CSRF Protection](./section-9-summary.md#10112-csrf-protection)
      - [10.11.3 Content Security Policy](./section-9-summary.md#10113-content-security-policy)
  - [Section 10 Summary](./section-10-summary.md)
  - [11. Backend Architecture](./11-backend-architecture.md)
    - [11.1 Overview](./11-backend-architecture.md#111-overview)
    - [11.2 API Architecture](./11-backend-architecture.md#112-api-architecture)
      - [11.2.1 Server Actions (90% of Mutations)](./11-backend-architecture.md#1121-server-actions-90-of-mutations)
      - [11.2.2 REST API Routes (10% - External Integrations)](./11-backend-architecture.md#1122-rest-api-routes-10-external-integrations)
    - [11.3 Database Access Patterns](./11-backend-architecture.md#113-database-access-patterns)
      - [11.3.1 Prisma Configuration](./11-backend-architecture.md#1131-prisma-configuration)
      - [11.3.2 Common Query Patterns](./11-backend-architecture.md#1132-common-query-patterns)
      - [11.3.3 Vector Search Pattern](./11-backend-architecture.md#1133-vector-search-pattern)
    - [11.4 Authentication & Authorization](./11-backend-architecture.md#114-authentication-authorization)
      - [11.4.1 Authentication Flow](./11-backend-architecture.md#1141-authentication-flow)
      - [11.4.2 Authorization Middleware](./11-backend-architecture.md#1142-authorization-middleware)
      - [11.4.3 Role-Based Access Control](./11-backend-architecture.md#1143-role-based-access-control)
    - [11.5 External Service Integration](./11-backend-architecture.md#115-external-service-integration)
      - [11.5.1 OpenAI Integration](./11-backend-architecture.md#1151-openai-integration)
      - [11.5.2 Redis Cache Integration](./11-backend-architecture.md#1152-redis-cache-integration)
      - [11.5.3 Background Job Processing](./11-backend-architecture.md#1153-background-job-processing)
      - [11.5.4 Supabase Storage Integration](./11-backend-architecture.md#1154-supabase-storage-integration)
    - [11.6 Error Handling & Monitoring](./11-backend-architecture.md#116-error-handling-monitoring)
      - [11.6.1 Global Error Handler](./11-backend-architecture.md#1161-global-error-handler)
      - [11.6.2 Rate Limiting](./11-backend-architecture.md#1162-rate-limiting)
    - [11.7 Performance Optimization](./11-backend-architecture.md#117-performance-optimization)
      - [11.7.1 Database Query Optimization](./11-backend-architecture.md#1171-database-query-optimization)
      - [11.7.2 Connection Pooling](./11-backend-architecture.md#1172-connection-pooling)
      - [11.7.3 Response Streaming](./11-backend-architecture.md#1173-response-streaming)
  - [Section 11 Summary](./section-11-summary.md)
  - [12. Unified Project Structure](./12-unified-project-structure.md)
    - [12.1 Overview](./12-unified-project-structure.md#121-overview)
    - [12.2 Complete Project Structure](./12-unified-project-structure.md#122-complete-project-structure)
    - [12.3 Directory Purposes](./12-unified-project-structure.md#123-directory-purposes)
      - [Core Directories](./12-unified-project-structure.md#core-directories)
      - [Supporting Directories](./12-unified-project-structure.md#supporting-directories)
    - [12.4 File Naming Conventions](./12-unified-project-structure.md#124-file-naming-conventions)
    - [12.5 Import Path Aliases](./12-unified-project-structure.md#125-import-path-aliases)
    - [12.6 Environment Files](./12-unified-project-structure.md#126-environment-files)
    - [12.7 Configuration Files](./12-unified-project-structure.md#127-configuration-files)
    - [12.8 Development vs Production Structure](./12-unified-project-structure.md#128-development-vs-production-structure)
    - [12.9 Monorepo Benefits](./12-unified-project-structure.md#129-monorepo-benefits)
  - [Section 12 Summary](./section-12-summary.md)
    - [13.1 Overview](./section-12-summary.md#131-overview)
    - [13.2 Initial Setup](./section-12-summary.md#132-initial-setup)
    - [13.3 Local Development](./section-12-summary.md#133-local-development)
    - [13.4 Development Patterns](./section-12-summary.md#134-development-patterns)
    - [13.5 Quality Assurance](./section-12-summary.md#135-quality-assurance)
    - [13.6 Testing Workflow](./section-12-summary.md#136-testing-workflow)
    - [13.7 Debugging](./section-12-summary.md#137-debugging)
  - [14. Deployment Architecture](./14-deployment-architecture.md)
    - [14.1 Overview](./14-deployment-architecture.md#141-overview)
    - [14.2 Environment Strategy](./14-deployment-architecture.md#142-environment-strategy)
    - [14.3 CI/CD Pipeline](./14-deployment-architecture.md#143-cicd-pipeline)
    - [14.4 Database Migrations](./14-deployment-architecture.md#144-database-migrations)
    - [14.5 Monitoring & Alerts](./14-deployment-architecture.md#145-monitoring-alerts)
    - [14.6 CDN & Edge Configuration](./14-deployment-architecture.md#146-cdn-edge-configuration)
  - [15. Security and Performance](./15-security-and-performance.md)
    - [15.1 Security Overview](./15-security-and-performance.md#151-security-overview)
    - [15.2 Authentication Security](./15-security-and-performance.md#152-authentication-security)
    - [15.3 Data Protection](./15-security-and-performance.md#153-data-protection)
    - [15.4 Input Validation & Sanitization](./15-security-and-performance.md#154-input-validation-sanitization)
    - [15.5 API Security](./15-security-and-performance.md#155-api-security)
    - [15.6 Performance Optimization](./15-security-and-performance.md#156-performance-optimization)
    - [15.7 Security Headers](./15-security-and-performance.md#157-security-headers)
    - [15.8 GDPR Compliance (NFR5)](./15-security-and-performance.md#158-gdpr-compliance-nfr5)
  - [Section 15 Summary](./section-15-summary.md)
    - [16.1 Overview](./section-15-summary.md#161-overview)
    - [16.2 Unit Testing](./section-15-summary.md#162-unit-testing)
    - [16.3 Integration Testing](./section-15-summary.md#163-integration-testing)
    - [16.4 E2E Testing](./section-15-summary.md#164-e2e-testing)
    - [16.5 Test Data Management](./section-15-summary.md#165-test-data-management)
    - [16.6 Mocking Strategy](./section-15-summary.md#166-mocking-strategy)
    - [16.7 Test Configuration](./section-15-summary.md#167-test-configuration)
  - [17. Coding Standards](./17-coding-standards.md)
    - [17.1 Overview](./17-coding-standards.md#171-overview)
    - [17.2 TypeScript Standards](./17-coding-standards.md#172-typescript-standards)
    - [17.3 React/Next.js Standards](./17-coding-standards.md#173-reactnextjs-standards)
    - [17.4 Database Standards](./17-coding-standards.md#174-database-standards)
    - [17.5 Error Handling Standards](./17-coding-standards.md#175-error-handling-standards)
    - [17.6 Security Standards](./17-coding-standards.md#176-security-standards)
    - [17.7 Performance Standards](./17-coding-standards.md#177-performance-standards)
    - [17.8 Git Commit Standards](./17-coding-standards.md#178-git-commit-standards)
  - [18. Error Handling Strategy](./18-error-handling-strategy.md)
    - [18.1 Overview](./18-error-handling-strategy.md#181-overview)
    - [18.2 Error Classification](./18-error-handling-strategy.md#182-error-classification)
    - [18.3 Global Error Handling](./18-error-handling-strategy.md#183-global-error-handling)
    - [18.4 Service-Specific Error Handling](./18-error-handling-strategy.md#184-service-specific-error-handling)
    - [18.5 User-Friendly Error Messages](./18-error-handling-strategy.md#185-user-friendly-error-messages)
    - [18.6 Logging Strategy](./18-error-handling-strategy.md#186-logging-strategy)
    - [18.7 Error Recovery Strategies](./18-error-handling-strategy.md#187-error-recovery-strategies)
  - [19. Monitoring and Observability](./19-monitoring-and-observability.md)
    - [19.1 Overview](./19-monitoring-and-observability.md#191-overview)
    - [19.2 Key Metrics](./19-monitoring-and-observability.md#192-key-metrics)
    - [19.3 Application Performance Monitoring](./19-monitoring-and-observability.md#193-application-performance-monitoring)
    - [19.4 Infrastructure Monitoring](./19-monitoring-and-observability.md#194-infrastructure-monitoring)
    - [19.5 User Analytics](./19-monitoring-and-observability.md#195-user-analytics)
    - [19.6 Cost Monitoring](./19-monitoring-and-observability.md#196-cost-monitoring)
    - [19.7 Alerting Strategy](./19-monitoring-and-observability.md#197-alerting-strategy)
    - [19.8 Dashboard and Reporting](./19-monitoring-and-observability.md#198-dashboard-and-reporting)
  - [Section 19 Summary](./section-19-summary.md)
  - [20. Architecture Completeness Checklist](./20-architecture-completeness-checklist.md)
    - [20.1 Document Completeness Review](./20-architecture-completeness-checklist.md#201-document-completeness-review)
    - [20.2 PRD Requirements Coverage](./20-architecture-completeness-checklist.md#202-prd-requirements-coverage)
    - [20.3 Technology Stack Validation](./20-architecture-completeness-checklist.md#203-technology-stack-validation)
    - [20.4 Critical Architecture Decisions](./20-architecture-completeness-checklist.md#204-critical-architecture-decisions)
    - [20.5 Implementation Readiness](./20-architecture-completeness-checklist.md#205-implementation-readiness)
    - [20.6 Risk Mitigation](./20-architecture-completeness-checklist.md#206-risk-mitigation)
    - [20.7 Development Team Readiness](./20-architecture-completeness-checklist.md#207-development-team-readiness)
    - [20.8 Compliance Verification](./20-architecture-completeness-checklist.md#208-compliance-verification)
    - [20.9 Performance Targets](./20-architecture-completeness-checklist.md#209-performance-targets)
    - [20.10 Final Validation Summary](./20-architecture-completeness-checklist.md#2010-final-validation-summary)
  - [Architecture Sign-off](./architecture-sign-off.md)
