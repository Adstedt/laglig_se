# Story 3.5: Implement Drag-and-Drop for Employee Cards into Chat

## Status

Draft

## Story

**As a** user,
**I want** to drag employee cards into chat,
**so that** the AI can answer HR questions specific to that employee.

## Acceptance Criteria

1. Employee cards (from HR Module Epic 7) made draggable
2. Dragging employee card into chat adds context pill
3. Context pill displays: employee name, role, "X" to remove
4. Backend includes employee metadata in RAG prompt: role, employment type, contract date, assigned kollektivavtal
5. Example query: "What are [Employee Name]'s vacation rights?" → AI considers their specific kollektivavtal
6. Context persists until removed
7. Visual feedback: Drop zone highlights, smooth animation
8. Mobile: Tap employee → "Add to chat context"
9. Privacy: Only users with HR Manager or Admin role can drag employee cards (role check in Epic 5)

## Tasks / Subtasks

- [ ] Make employee cards draggable
- [ ] Add employee context to chat state
- [ ] Update RAG prompt with employee metadata
- [ ] Test HR-specific queries
- [ ] Implement role-based access control
- [ ] Add mobile tap-to-add

## Dev Notes

**Employee Context in RAG:**

```typescript
const employeeContext = {
  name: 'Anna Andersson',
  role: 'Restaurangbiträde',
  employmentType: 'FULL_TIME',
  contractDate: '2023-01-15',
  kollektivavtal: 'Restaurang och Hotell',
}

// Augment RAG prompt
const prompt = `
User has dragged employee ${employeeContext.name} into context.
Employee details:
- Role: ${employeeContext.role}
- Employment type: ${employeeContext.employmentType}
- Contract started: ${employeeContext.contractDate}
- Covered by kollektivavtal: ${employeeContext.kollektivavtal}

User question: ${query}

Answer considering this specific employee's situation.
`
```

**Reference:** Feature Spec 05 (HR Module), Epic 7 stories

## Change Log

| Date       | Version | Description            | Author     |
| ---------- | ------- | ---------------------- | ---------- |
| 2025-11-11 | 1.0     | Initial story creation | Sarah (PO) |

## Dev Agent Record

_To be populated by dev agent_

## QA Results

_To be populated by QA agent_
