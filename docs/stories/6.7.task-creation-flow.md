# Story 6.7: Implement Task Creation Flow

## Status

Draft

## Story

**As a** user,
**I want** to create tasks from multiple entry points,
**so that** I can capture compliance work when I identify it.

## Acceptance Criteria

**From Legal Document Modal:**

1. "Skapa uppgift" button in Tasks tab
2. Task automatically linked to current list item
3. Quick form: title, description (optional), assignee, due date
4. "Skapa" saves and shows task in list
5. "Skapa och oppna" saves and opens Task Modal

**From Task Workspace:**

6. "Ny uppgift" button in toolbar
7. Full form with all fields including linked laws selector
8. Task appears in "Att gora" column

**From Quick Add (Global):**

9. Keyboard shortcut (Ctrl+Shift+T) opens quick task dialog
10. Minimal form: title + optional link to law
11. Created in default list or last-used list

**Validation:**

12. Title required (min 3 characters)
13. Due date optional but recommended (show warning if empty)

## Tasks / Subtasks

_To be detailed during sprint planning_

- [ ] Create tasks table and Prisma model
- [ ] Build task creation form component
- [ ] Implement "Skapa uppgift" in Legal Document Modal
- [ ] Add "Ny uppgift" button to Task Workspace toolbar
- [ ] Implement global keyboard shortcut (Ctrl+Shift+T)
- [ ] Build quick task dialog
- [ ] Add form validation
- [ ] Wire up server actions for task creation

## Dev Notes

### Data Model

```sql
tasks
  - id UUID PRIMARY KEY
  - workspace_id UUID REFERENCES workspaces(id)
  - title VARCHAR(255) NOT NULL
  - description TEXT
  - status_column_id UUID REFERENCES task_columns(id)
  - priority ENUM('LOW', 'MEDIUM', 'HIGH')
  - assignee_id UUID REFERENCES users(id)
  - due_date DATE
  - created_by_id UUID REFERENCES users(id)
  - created_at TIMESTAMP
  - updated_at TIMESTAMP

task_list_item_links (many-to-many)
  - task_id UUID REFERENCES tasks(id)
  - list_item_id UUID REFERENCES list_items(id)
```

### File Locations

```
components/features/tasks/
  task-creation-form.tsx
  quick-task-dialog.tsx
app/actions/tasks.ts
  createTask()
```

## Testing

- Unit tests for form validation
- E2E tests for each entry point
- Test keyboard shortcut

## Change Log

| Date       | Version | Description            | Author     |
| ---------- | ------- | ---------------------- | ---------- |
| 2026-01-08 | 1.0     | Initial story creation | Sarah (PO) |
