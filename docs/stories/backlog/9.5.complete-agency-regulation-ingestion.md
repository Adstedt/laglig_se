# Story 9.5: Complete Agency Regulation Ingestion

## Status

Draft

## Story

**As a** platform,
**I want** to ingest the remaining agency regulations identified in the 8.17 audit but not yet added to the registry,
**so that** we have comprehensive coverage of myndighetsforeskrifter across all supported agencies.

## Context & Background

Story 8.17 expanded the registry significantly (43→179 non-AFS entries) and established content hashes for change detection. However, the audit (`data/agency-audit-report.md`) identified substantial remaining gaps — documents published on agency websites that were not added to the registry during 8.17.

The existing pipeline (`scripts/ingest-agency-pdfs.ts`) is fully functional and can handle these documents with no code changes — this is purely a registry expansion and ingestion execution story.

## Coverage Gaps (from 8.17 Audit)

| Agency | Gap | Scale | Notes |
|--------|-----|-------|-------|
| **SCB-FS** | ~110 documents on scb.se, only 1 in registry | Huge | Many are statistical reporting obligations (uppgiftsskyldighet) — evaluate relevance before bulk ingestion |
| **NFS** | 14 new documents on naturvardsverket.se | Medium | Mostly recently published (2024-2026) regulations |
| **MSBFS** | 13 newer docs (2024-2025) on mcf.se | Medium | Recently published regulations |
| **KIFS** | 2 additional documents on kemi.se | Small | |
| **SRVFS** | 1 additional document on mcf.se | Small | |

**Total estimated gap:** ~140 documents

## Acceptance Criteria

1. Evaluate SCB-FS relevance: determine which of the ~110 SCB-FS regulations are relevant to the platform's target audience (compliance professionals) vs. purely statistical reporting obligations
2. Add relevant newly discovered regulations to `agency-pdf-registry.ts` (and `afs-registry.ts` if applicable)
3. Download PDFs for all new entries to `data/{authority}-pdfs/`
4. Run ingestion pipeline for all new documents
5. Run `--verify-db` to confirm all non-stub entries have complete DB records
6. Run `--backfill-hashes` to ensure all new entries have content hashes
7. Update `data/agency-audit-report.md` with final coverage status
8. Mark large/visual-heavy documents as `stubOnly: true` where appropriate

## Tasks / Subtasks

- [ ] **Task 1: SCB-FS relevance evaluation** — Browse scb.se regulations, categorize by relevance, decide which to ingest
- [ ] **Task 2: Add new registry entries** — Add all relevant docs to registry arrays
- [ ] **Task 3: Download and ingest** — Download PDFs, run pipeline per agency
- [ ] **Task 4: Verify and backfill** — Run `--verify-db` and `--backfill-hashes`
- [ ] **Task 5: Update audit report** — Document final coverage and any remaining gaps

## Dev Notes

- No code changes expected — existing pipeline handles everything
- Budget estimate: ~140 docs × ~$0.15/doc = ~$21 (within single-run ceiling if batched by agency)
- SCB-FS is the critical decision: bulk ingesting 110 statistical forms may not add user value

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-17 | 1.0 | Created from 8.17 coverage gaps | Quinn (QA) |
