# Story 2.13: Add Abbreviation Support for Laws

## Story

**As a** user searching for laws,
**I want** to find laws by their common abbreviations (e.g., "LAS", "MBL", "ABL"),
**So that** I can quickly find the law I'm looking for using familiar shorthand.

## Status

BACKLOG

## Context

Many Swedish laws have well-known abbreviations that legal professionals and the public use daily. Currently, searching for "LAS" won't find "Lag (1982:80) om anställningsskydd" because we don't store or index these abbreviations.

### Examples of Common Abbreviations
| Abbreviation | Full Name |
|-------------|-----------|
| LAS | Lag om anställningsskydd |
| MBL | Medbestämmandelagen |
| ABL | Aktiebolagslagen |
| BrB | Brottsbalken |
| RB | Rättegångsbalken |
| ÄB | Ärvdabalken |
| JB | Jordabalken |
| FB | Föräldrabalken |
| SoL | Socialtjänstlagen |
| PuL/GDPR | Dataskyddslagen |

### Current State
- No abbreviation field in `legal_documents` table
- Search only matches title, document_number, and full_text
- Users must know the full law name to find it

### Desired State
- New `abbreviations` field (array) in database
- Search includes abbreviations in matching
- UI displays abbreviation as subtitle/tag on law pages
- Admin can manage abbreviations (future story)

## Estimation

**Story Points**: 2

## Acceptance Criteria

### AC1: Database Schema Update
- [ ] Add `abbreviations` column to `legal_documents` table (String array or JSON)
- [ ] Run migration successfully
- [ ] Index the abbreviations column for search performance

### AC2: Search Integration
- [ ] Update search to include abbreviations in matching
- [ ] Searching "LAS" returns Lag om anställningsskydd
- [ ] Abbreviation matches ranked highly in results

### AC3: UI Display
- [ ] Show abbreviation(s) on law page header (if exists)
- [ ] Display as subtle tag/badge near title
- [ ] Show in search results alongside title

### AC4: Initial Data Population
- [ ] Create script to populate common abbreviations
- [ ] Start with top 20-30 most common law abbreviations
- [ ] Document source for abbreviations

## Technical Notes

### Prisma Schema Change
```prisma
model LegalDocument {
  // ... existing fields
  abbreviations String[] @default([])  // e.g., ["LAS", "Anställningsskyddslagen"]
}
```

### Search Query Update
```sql
-- Add to search vector or query
WHERE
  title ILIKE '%search%'
  OR document_number ILIKE '%search%'
  OR 'search' = ANY(abbreviations)  -- Exact match for abbreviations
```

### Alternative: JSONB metadata field
If we anticipate more metadata needs, consider a general `metadata` JSONB column:
```prisma
model LegalDocument {
  metadata Json? // { abbreviations: ["LAS"], popularName: "Anställningsskyddslagen", ... }
}
```

## Data Sources

Potential sources for abbreviation data:
1. Manual curation from legal reference materials
2. Notisum's law list (has some abbreviations)
3. Legal textbooks and practice guides
4. Wikipedia's list of Swedish law abbreviations

## Dependencies

- Story 2.7: Multi-content search (for search integration)

## Future Considerations

- Admin UI for managing abbreviations
- User suggestions for missing abbreviations
- Auto-detection of abbreviations from legal texts

## Change Log

| Date       | Version | Description            | Author     |
| ---------- | ------- | ---------------------- | ---------- |
| 2025-12-09 | 1.0     | Initial backlog story  | Dev Agent  |
