# Story 2.11: Begin Recording Multi-Content-Type Change History

## Status

Draft

## Story

**As a** product owner,
**I want** to start collecting change history for ALL content types NOW,
**so that** by Epic 8, we have 10+ weeks of historical data.

## Acceptance Criteria

1. Daily cron job created (runs 00:00 UTC)
2. Monitors changes across: SFS laws, court cases, EU legislation
3. Compare current vs previous versions
4. Detect: new documents, content changes, status changes
5. Store in `content_changes` table
6. No user-facing UI (background collection)
7. Job logs change counts
8. Errors logged to Sentry
9. Job completes in <3 hours
10. Database accumulates history silently
11. Verification: After 2 weeks, change records exist
12. Change detection tested
13. Amendment enrichment: extract references, parse sections, GPT-4 summaries, effective dates (~$0.42/month for ~10 amendments/day)

## Tasks / Subtasks

- [ ] Create cron job configuration
- [ ] Implement change detection logic per content type
- [ ] Create `content_changes` table
- [ ] Store detected changes
- [ ] Add amendment enrichment for SFS changes
- [ ] Configure error logging
- [ ] Test change detection
- [ ] Verify 2-week accumulation

## Dev Notes

**Cron:** Vercel Cron or external scheduler
**Detection:** Compare checksums or last_modified timestamps
**Amendment Enrichment:** See docs/historical-amendment-tracking-strategy.md Section 12.5
**Reference:** Architecture Section 19 (Monitoring), Epic 8 (Change Monitoring)

## Change Log

| Date       | Version | Description            | Author     |
| ---------- | ------- | ---------------------- | ---------- |
| 2025-11-11 | 1.0     | Initial story creation | Sarah (PO) |

## Dev Agent Record

_To be populated by dev agent_

## QA Results

_To be populated by QA agent_
